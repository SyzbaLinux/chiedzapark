import{u as Pe,t as E,V as Te,a as Ee,b as oe,A as Me}from"./AppLayout-_Serkj-q.js";import{p as Ue,q as Be,s as Le,C as Ne,g as O,D as M,x as ne,d as y,E as U,B as ue,I as je,b as t,F as z,A as I,G as Ke,i as B,H as Oe,J as Ge,K as ze,o as G,c as re,w as p,m as se,a as S,f as ie,t as de,h as X,l as He}from"./app-DuLo4FY9.js";import{_ as qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as Je,b as We,V as Qe}from"./VMain-CXV3moGT.js";import{V as Xe,a as Ye,b as Ze}from"./VCard-tFaCK1Tv.js";import{V as $e,a as P}from"./VRow-QbtxhabJ.js";import{m as el,a as ll,u as tl,b as al,c as ol,d as nl,V as Y}from"./filter-BSgrgWCY.js";import{b as ul,V as ce}from"./VTextField-D4lPXCop.js";import{m as rl,a as sl,u as il,V as me,b as dl}from"./index-DzAJrpfY.js";import{u as cl}from"./form-C5VTcral.js";import{f as ml}from"./forwardRefs-C-GTDzx5.js";import{V as vl}from"./VCheckboxBtn-CVw8ZDjg.js";import{V as fl}from"./VAvatar-B_JK5Alz.js";import{V as pl}from"./VForm-nr5zxH4e.js";import"./easing-DY7PVvcf.js";function bl(e,u,T){if(u==null)return e;if(Array.isArray(u))throw new Error("Multiple matches is not implemented");return typeof u=="number"&&~u?t(z,null,[t("span",{class:"v-combobox__unmask"},[e.substr(0,u)]),t("span",{class:"v-combobox__mask"},[e.substr(u,T)]),t("span",{class:"v-combobox__unmask"},[e.substr(u+T)])]):e}const gl=Ue({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...el({filterKeys:["title"]}),...ll({hideNoData:!0,returnObject:!0}),...Be(ul({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...rl({transition:!1})},"VCombobox"),Vl=Le()({name:"VCombobox",props:gl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,u){var le;let{emit:T,slots:r}=u;const{t:i}=Ne(),h=O(),V=M(!1),x=M(!0),c=M(!1),Z=O(),$=O(),H=ne(e,"menu"),v=y({get:()=>H.value,set:l=>{var o;H.value&&!l&&((o=Z.value)!=null&&o.Î¨openChildren)||(H.value=l)}}),d=M(-1);let q=!1;const ve=y(()=>{var l;return(l=h.value)==null?void 0:l.color}),ee=y(()=>v.value?e.closeText:e.openText),{items:fe,transformIn:pe,transformOut:be}=Pe(e),{textColorClasses:ge,textColorStyles:Ve}=sl(ve),n=ne(e,"modelValue",[],l=>pe(ze(l)),l=>{const o=be(l);return e.multiple?o:o[0]??null}),F=cl(),L=y(()=>!!(e.chips||r.chip)),k=y(()=>L.value||!!r.selection),w=M(!e.multiple&&!k.value?((le=n.value[0])==null?void 0:le.title)??"":""),f=y({get:()=>w.value,set:l=>{var o;if(w.value=l??"",!e.multiple&&!k.value&&(n.value=[E(e,l)]),l&&e.multiple&&((o=e.delimiters)!=null&&o.length)){const m=l.split(new RegExp(`(?:${e.delimiters.join("|")})+`));m.length>1&&(m.forEach(a=>{a=a.trim(),a&&C(E(e,a))}),w.value="")}l||(d.value=-1),x.value=!l}}),_e=y(()=>typeof e.counterValue=="function"?e.counterValue(n.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?n.value.length:f.value.length);U(w,l=>{q?ue(()=>q=!1):V.value&&!v.value&&(v.value=!0),T("update:search",l)}),U(n,l=>{var o;!e.multiple&&!k.value&&(w.value=((o=l[0])==null?void 0:o.title)??"")});const{filteredItems:N,getMatches:ye}=tl(e,fe,()=>x.value?"":f.value),R=y(()=>e.hideSelected?N.value.filter(l=>!n.value.some(o=>o.value===l.value)):N.value),he=y(()=>n.value.map(l=>l.value)),J=y(()=>{var o;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&f.value===((o=R.value[0])==null?void 0:o.title))&&R.value.length>0&&!x.value&&!c.value}),W=y(()=>e.hideNoData&&!R.value.length||e.readonly||(F==null?void 0:F.isReadonly.value)),Q=O(),{onListScroll:xe,onListKeydown:Ce}=al(Q,h);function ke(l){q=!0,e.openOnClear&&(v.value=!0)}function Se(){W.value||(v.value=!0)}function we(l){W.value||(V.value&&(l.preventDefault(),l.stopPropagation()),v.value=!v.value)}function Re(l){var a;if(Ge(l)||e.readonly||F!=null&&F.isReadonly.value)return;const o=h.value.selectionStart,m=n.value.length;if((d.value>-1||["Enter","ArrowDown","ArrowUp"].includes(l.key))&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(v.value=!0),["Escape"].includes(l.key)&&(v.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(J.value&&["Enter","Tab"].includes(l.key)&&!n.value.some(s=>{let{value:_}=s;return _===R.value[0].value})&&C(N.value[0]),x.value=!0),l.key==="ArrowDown"&&J.value&&((a=Q.value)==null||a.focus("next")),l.key==="Enter"&&f.value&&(C(E(e,f.value)),k.value&&(w.value="")),["Backspace","Delete"].includes(l.key)){if(!e.multiple&&k.value&&n.value.length>0&&!f.value)return C(n.value[0],!1);if(~d.value){const s=d.value;C(n.value[d.value],!1),d.value=s>=m-1?m-2:s}else l.key==="Backspace"&&!f.value&&(d.value=m-1)}if(e.multiple){if(l.key==="ArrowLeft"){if(d.value<0&&o>0)return;const s=d.value>-1?d.value-1:m-1;n.value[s]?d.value=s:(d.value=-1,h.value.setSelectionRange(f.value.length,f.value.length))}if(l.key==="ArrowRight"){if(d.value<0)return;const s=d.value+1;n.value[s]?d.value=s:(d.value=-1,h.value.setSelectionRange(0,0))}}}function De(){var l;V.value&&(x.value=!0,(l=h.value)==null||l.focus())}function C(l){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!l||l.props.disabled))if(e.multiple){const m=n.value.findIndex(s=>e.valueComparator(s.value,l.value)),a=o??!~m;if(~m){const s=a?[...n.value,l]:[...n.value];s.splice(m,1),n.value=s}else a&&(n.value=[...n.value,l]);e.clearOnSelect&&(f.value="")}else{const m=o!==!1;n.value=m?[l]:[],w.value=m&&!k.value?l.title:"",ue(()=>{v.value=!1,x.value=!0})}}function Ae(l){V.value=!0,setTimeout(()=>{c.value=!0})}function Fe(l){c.value=!1}function Ie(l){(l==null||l===""&&!e.multiple&&!k.value)&&(n.value=[])}return U(V,(l,o)=>{if(!(l||l===o)&&(d.value=-1,v.value=!1,f.value)){if(e.multiple){C(E(e,f.value));return}if(!k.value)return;n.value.some(m=>{let{title:a}=m;return a===f.value})?w.value="":C(E(e,f.value))}}),U(v,()=>{if(!e.hideSelected&&v.value&&n.value.length){const l=R.value.findIndex(o=>n.value.some(m=>e.valueComparator(m.value,o.value)));je&&window.requestAnimationFrame(()=>{var o;l>=0&&((o=$.value)==null||o.scrollToIndex(l))})}}),U(()=>e.items,(l,o)=>{v.value||V.value&&!o.length&&l.length&&(v.value=!0)}),il(()=>{const l=!!(!e.hideNoData||R.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),o=n.value.length>0,m=ce.filterProps(e);return t(ce,I({ref:h},m,{modelValue:f.value,"onUpdate:modelValue":[a=>f.value=a,Ie],focused:V.value,"onUpdate:focused":a=>V.value=a,validationValue:n.externalValue,counterValue:_e.value,dirty:o,class:["v-combobox",{"v-combobox--active-menu":v.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!k.value,"v-combobox--selecting-index":d.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:e.readonly,placeholder:o?void 0:e.placeholder,"onClick:clear":ke,"onMousedown:control":Se,onKeydown:Re}),{...r,default:()=>t(z,null,[t(Te,I({ref:Z,modelValue:v.value,"onUpdate:modelValue":a=>v.value=a,activator:"parent",contentClass:"v-combobox__content",disabled:W.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:De},e.menuProps),{default:()=>[l&&t(Ee,I({ref:Q,selected:he.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:a=>a.preventDefault(),onKeydown:Ce,onFocusin:Ae,onFocusout:Fe,onScrollPassive:xe,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var a,s,_;return[(a=r["prepend-item"])==null?void 0:a.call(r),!R.value.length&&!e.hideNoData&&(((s=r["no-data"])==null?void 0:s.call(r))??t(oe,{title:i(e.noDataText)},null)),t(ol,{ref:$,renderless:!0,items:R.value},{default:D=>{var ae;let{item:b,index:A,itemRef:g}=D;const te=I(b.props,{ref:g,key:A,active:J.value&&A===0?!0:void 0,onClick:()=>C(b,null)});return((ae=r.item)==null?void 0:ae.call(r,{item:b,index:A,props:te}))??t(oe,I(te,{role:"option"}),{prepend:j=>{let{isSelected:K}=j;return t(z,null,[e.multiple&&!e.hideSelected?t(vl,{key:b.value,modelValue:K,ripple:!1,tabindex:"-1"},null):void 0,b.props.prependAvatar&&t(fl,{image:b.props.prependAvatar},null),b.props.prependIcon&&t(me,{icon:b.props.prependIcon},null)])},title:()=>{var j,K;return x.value?b.title:bl(b.title,(j=ye(b))==null?void 0:j.title,((K=f.value)==null?void 0:K.length)??0)}})}}),(_=r["append-item"])==null?void 0:_.call(r)]}})]}),n.value.map((a,s)=>{function _(g){g.stopPropagation(),g.preventDefault(),C(a,!1)}const D={"onClick:close":_,onKeydown(g){g.key!=="Enter"&&g.key!==" "||(g.preventDefault(),g.stopPropagation(),_(g))},onMousedown(g){g.preventDefault(),g.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},b=L.value?!!r.chip:!!r.selection,A=b?Ke(L.value?r.chip({item:a,index:s,props:D}):r.selection({item:a,index:s})):void 0;if(!(b&&!A))return t("div",{key:a.value,class:["v-combobox__selection",s===d.value&&["v-combobox__selection--selected",ge.value]],style:s===d.value?Ve.value:{}},[L.value?r.chip?t(dl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:a.title}}},{default:()=>[A]}):t(nl,I({key:"chip",closable:e.closableChips,size:"small",text:a.title,disabled:a.props.disabled},D),null):A??t("span",{class:"v-combobox__selection-text"},[a.title,e.multiple&&s<n.value.length-1&&t("span",{class:"v-combobox__selection-comma"},[B(",")])])])})]),"append-inner":function(){var D;for(var a=arguments.length,s=new Array(a),_=0;_<a;_++)s[_]=arguments[_];return t(z,null,[(D=r["append-inner"])==null?void 0:D.call(r,...s),(!e.hideNoData||e.items.length)&&e.menuIcon?t(me,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:we,onClick:Oe,"aria-label":i(ee.value),title:i(ee.value),tabindex:"-1"},null):void 0])}})}),ml({isFocused:V,isPristine:x,menu:v,search:f,selectionIndex:d,filteredItems:N,select:C},h)}}),_l={components:{AppLayout:Me},data(){return{form:this.$inertia.form({start_date:this.$page.props.start_date,end_date:this.$page.props.end_date,report_type:"payments",project_id:1,extra_info:"none",client_id:null})}},methods:{generateReport(){this.form.get(route("admin.generateReport"))}}},yl={class:"glass pa-3"},hl=S("label",{for:"start_date"},"Select Start Date",-1),xl=S("br",null,null,-1),Cl={key:0,class:"_12px",style:{color:"red"}},kl=S("label",{for:"start_date"},"Select End Date",-1),Sl=S("br",null,null,-1),wl={key:0,class:"_12px",style:{color:"red"}},Rl=S("label",{for:""},"Report type",-1),Dl=S("label",{for:""},"Select Project",-1),Al=S("label",{for:""},"Additional Information",-1),Fl=S("label",{for:""},"Select Client",-1);function Il(e,u,T,r,i,h){const V=se("DatePickerEs"),x=se("AppLayout");return G(),re(x,{title:"Generate Report"},{default:p(()=>[S("div",yl,[t(We,{class:"rounded-lg px-2 mb-5",density:"comfortable"},{default:p(()=>[t(Je,null,{default:p(()=>[B(" Generate Report ")]),_:1})]),_:1}),t(pl,{onSubmit:u[8]||(u[8]=He(c=>h.generateReport(),["prevent"]))},{default:p(()=>[t(Xe,{variant:"flat"},{default:p(()=>[t(Ye,null,{default:p(()=>[t($e,null,{default:p(()=>[t(P,{cols:"12",sm:"3",md:"3",lg:"3"},{default:p(()=>[hl,B(),xl,t(V,{modelValue:i.form.start_date,"onUpdate:modelValue":u[0]||(u[0]=c=>i.form.start_date=c),valueType:"format",value:i.form.start_date,"onUpdate:value":u[1]||(u[1]=c=>i.form.start_date=c)},null,8,["modelValue","value"]),e.$page.props.errors.start_date?(G(),ie("span",Cl,de(e.$page.props.errors.start_date),1)):X("",!0)]),_:1}),t(P,{cols:"12",sm:"3",md:"3",lg:"3"},{default:p(()=>[kl,B(),Sl,t(V,{modelValue:i.form.end_date,"onUpdate:modelValue":u[2]||(u[2]=c=>i.form.end_date=c),valueType:"format",value:i.form.end_date,"onUpdate:value":u[3]||(u[3]=c=>i.form.end_date=c)},null,8,["modelValue","value"]),e.$page.props.errors.end_date?(G(),ie("span",wl,de(e.$page.props.errors.end_date),1)):X("",!0)]),_:1}),t(P,{cols:"12",sm:"3",md:"3",lg:"3"},{default:p(()=>[Rl,t(Y,{modelValue:i.form.report_type,"onUpdate:modelValue":u[4]||(u[4]=c=>i.form.report_type=c),items:["payments","arrears"]},null,8,["modelValue"])]),_:1}),t(P,{cols:"12",sm:"3",md:"3",lg:"3"},{default:p(()=>[Dl,t(Y,{modelValue:i.form.project_id,"onUpdate:modelValue":u[5]||(u[5]=c=>i.form.project_id=c),items:e.$page.props.projects,"item-value":"id","item-title":"name","error-messages":e.$page.props.errors.project_id},null,8,["modelValue","items","error-messages"])]),_:1}),t(P,{cols:"12",sm:"3",md:"3",lg:"3"},{default:p(()=>[Al,t(Y,{modelValue:i.form.extra_info,"onUpdate:modelValue":u[6]||(u[6]=c=>i.form.extra_info=c),items:["none","client"],clearable:""},null,8,["modelValue"])]),_:1}),i.form.extra_info==="client"?(G(),re(P,{key:0,cols:"12",sm:"3",md:"3",lg:"3"},{default:p(()=>[Fl,t(Vl,{items:e.$page.props.clients,modelValue:i.form.client_id,"onUpdate:modelValue":u[7]||(u[7]=c=>i.form.client_id=c),"item-value":"id","item-title":"first_name",variant:"outlined",density:"comfortable",clearable:""},null,8,["items","modelValue"])]),_:1})):X("",!0)]),_:1})]),_:1}),t(Ze,null,{default:p(()=>[t(Qe,{loading:i.form.processing,variant:"flat",size:"x-large",type:"submit"},{default:p(()=>[B(" Submit & Generate Report ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})])]),_:1})}const Jl=qe(_l,[["render",Il]]);export{Jl as default};
